<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <h2>{{ mode === 'create' ? '‚ûï Th√™m S√°ch M·ªõi' : '‚úèÔ∏è Ch·ªânh S·ª≠a S√°ch' }}</h2>
        </div>

        <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
            <div class="form-grid">
                <!-- T√™n S√°ch -->
                <div class="form-group full-width">
                    <label>T√™n S√°ch <span class="required">*</span></label>
                    <input type="text" formControlName="tenSach" placeholder="Nh·∫≠p t√™n s√°ch"
                        [class.error]="isFieldInvalid('tenSach')">
                    @if (isFieldInvalid('tenSach')) {
                    <span class="error-message">{{ getErrorMessage('tenSach') }}</span>
                    }
                </div>

                <!-- Gi√° B√°n -->
                <div class="form-group">
                    <label>Gi√° B√°n (VNƒê) <span class="required">*</span></label>
                    <input type="number" formControlName="giaBan" placeholder="0"
                        [class.error]="isFieldInvalid('giaBan')">
                    @if (isFieldInvalid('giaBan')) {
                    <span class="error-message">{{ getErrorMessage('giaBan') }}</span>
                    }
                </div>

                <!-- S·ªë L∆∞·ª£ng T·ªìn -->
                <div class="form-group">
                    <label>S·ªë L∆∞·ª£ng T·ªìn <span class="required">*</span></label>
                    <input type="number" formControlName="soLuongTon" placeholder="0"
                        [class.error]="isFieldInvalid('soLuongTon')">
                    @if (isFieldInvalid('soLuongTon')) {
                    <span class="error-message">{{ getErrorMessage('soLuongTon') }}</span>
                    }
                </div>

                <!-- M√£ CD -->
                <div class="form-group">
                    <label>M√£ CD <span class="required">*</span></label>
                    <input type="number" formControlName="maCD" placeholder="0" [class.error]="isFieldInvalid('maCD')">
                    @if (isFieldInvalid('maCD')) {
                    <span class="error-message">{{ getErrorMessage('maCD') }}</span>
                    }
                </div>

                <!-- M√£ NXB -->
                <div class="form-group">
                    <label>M√£ NXB <span class="required">*</span></label>
                    <input type="number" formControlName="maNXB" placeholder="0"
                        [class.error]="isFieldInvalid('maNXB')">
                    @if (isFieldInvalid('maNXB')) {
                    <span class="error-message">{{ getErrorMessage('maNXB') }}</span>
                    }
                </div>

                <!-- Ng√†y C·∫≠p Nh·∫≠t -->
                <div class="form-group">
                    <label>Ng√†y C·∫≠p Nh·∫≠t <span class="required">*</span></label>
                    <input type="text" formControlName="ngayCapNhat" placeholder="DD/MM/YYYY HH:MM SA"
                        [class.error]="isFieldInvalid('ngayCapNhat')">
                    @if (isFieldInvalid('ngayCapNhat')) {
                    <span class="error-message">{{ getErrorMessage('ngayCapNhat') }}</span>
                    }
                    <p class="help-text">ƒê·ªãnh d·∫°ng: DD/MM/YYYY HH:MM SA (v√≠ d·ª•: 25/10/2014 12:00 SA)</p>
                </div>

                <!-- M√¥ T·∫£ -->
                <div class="form-group full-width">
                    <label>M√¥ T·∫£ <span class="required">*</span></label>
                    <textarea formControlName="moTa" rows="4" placeholder="Nh·∫≠p m√¥ t·∫£ s√°ch"
                        [class.error]="isFieldInvalid('moTa')"></textarea>
                    @if (isFieldInvalid('moTa')) {
                    <span class="error-message">{{ getErrorMessage('moTa') }}</span>
                    }
                </div>

                <!-- ·∫¢nh B√¨a -->
                <div class="form-group full-width">
                    <label>·∫¢nh B√¨a <span class="required">*</span></label>
                    <input type="text" formControlName="anhBia" placeholder="V√≠ d·ª•: THCB.jpg"
                        (input)="onImageChange($event)" [class.error]="isFieldInvalid('anhBia')">
                    @if (isFieldInvalid('anhBia')) {
                    <span class="error-message">{{ getErrorMessage('anhBia') }}</span>
                    }
                    <p class="help-text">Nh·∫≠p t√™n file ·∫£nh (·∫£nh ph·∫£i c√≥ trong th∆∞ m·ª•c my-service/public/images/books/)
                    </p>
                </div>

                <!-- Image Preview -->
                @if (imagePreview) {
                <div class="form-group full-width">
                    <label>Xem Tr∆∞·ªõc</label>
                    <div class="image-preview">
                        <img [src]="imagePreview" alt="Preview"
                            onerror="this.src='https://via.placeholder.com/200x280?text=No+Image'">
                    </div>
                </div>
                }
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-cancel" (click)="onCancel()">
                    ‚ùå H·ªßy
                </button>
                <button type="submit" class="btn btn-submit">
                    {{ mode === 'create' ? '‚úÖ T·∫°o M·ªõi' : 'üíæ C·∫≠p Nh·∫≠t' }}
                </button>
            </div>
        </form>
    </div>
</div>