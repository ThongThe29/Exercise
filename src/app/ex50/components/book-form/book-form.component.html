<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <h2>{{ mode === 'create' ? '‚ûï Th√™m S√°ch M·ªõi' : '‚úèÔ∏è Ch·ªânh S·ª≠a S√°ch' }}</h2>
        </div>

        <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
            <div class="form-grid">
                <!-- T√™n S√°ch -->
                <div class="form-group full-width">
                    <label>T√™n S√°ch <span class="required">*</span></label>
                    <input type="text" formControlName="tenSach" placeholder="Nh·∫≠p t√™n s√°ch"
                        [class.error]="isFieldInvalid('tenSach')">
                    @if (isFieldInvalid('tenSach')) {
                    <span class="error-message">{{ getErrorMessage('tenSach') }}</span>
                    }
                </div>

                <!-- Gi√° -->
                <div class="form-group">
                    <label>Gi√° (VNƒê) <span class="required">*</span></label>
                    <input type="number" formControlName="gia" placeholder="0" [class.error]="isFieldInvalid('gia')">
                    @if (isFieldInvalid('gia')) {
                    <span class="error-message">{{ getErrorMessage('gia') }}</span>
                    }
                </div>

                <!-- S·ªë Trang -->
                <div class="form-group">
                    <label>S·ªë Trang <span class="required">*</span></label>
                    <input type="number" formControlName="soTrang" placeholder="0"
                        [class.error]="isFieldInvalid('soTrang')">
                    @if (isFieldInvalid('soTrang')) {
                    <span class="error-message">{{ getErrorMessage('soTrang') }}</span>
                    }
                </div>

                <!-- Ng√†y Xu·∫•t B·∫£n -->
                <div class="form-group">
                    <label>Ng√†y Xu·∫•t B·∫£n <span class="required">*</span></label>
                    <input type="date" formControlName="ngayXuatBan" [class.error]="isFieldInvalid('ngayXuatBan')">
                    @if (isFieldInvalid('ngayXuatBan')) {
                    <span class="error-message">{{ getErrorMessage('ngayXuatBan') }}</span>
                    }
                </div>

                <!-- T√°c Gi·∫£ ID -->
                <div class="form-group">
                    <label>T√°c Gi·∫£ (ID) <span class="required">*</span></label>
                    <input type="number" formControlName="tacGia" placeholder="0"
                        [class.error]="isFieldInvalid('tacGia')">
                    @if (isFieldInvalid('tacGia')) {
                    <span class="error-message">{{ getErrorMessage('tacGia') }}</span>
                    }
                </div>

                <!-- Ch∆∞∆°ng -->
                <div class="form-group">
                    <label>Ch∆∞∆°ng <span class="required">*</span></label>
                    <input type="number" formControlName="chuong" placeholder="0"
                        [class.error]="isFieldInvalid('chuong')">
                    @if (isFieldInvalid('chuong')) {
                    <span class="error-message">{{ getErrorMessage('chuong') }}</span>
                    }
                </div>

                <!-- M√¥ T·∫£ -->
                <div class="form-group full-width">
                    <label>M√¥ T·∫£ <span class="required">*</span></label>
                    <textarea formControlName="moTa" rows="4" placeholder="Nh·∫≠p m√¥ t·∫£ s√°ch"
                        [class.error]="isFieldInvalid('moTa')"></textarea>
                    @if (isFieldInvalid('moTa')) {
                    <span class="error-message">{{ getErrorMessage('moTa') }}</span>
                    }
                </div>

                <!-- ·∫¢nh B√¨a -->
                <div class="form-group full-width">
                    <label>·∫¢nh B√¨a <span class="required">*</span></label>
                    <input type="text" formControlName="anhBia" placeholder="V√≠ d·ª•: book.jpg"
                        (input)="onImageChange($event)" [class.error]="isFieldInvalid('anhBia')">
                    @if (isFieldInvalid('anhBia')) {
                    <span class="error-message">{{ getErrorMessage('anhBia') }}</span>
                    }
                    <p class="help-text">Nh·∫≠p t√™n file ·∫£nh (·∫£nh ph·∫£i c√≥ trong th∆∞ m·ª•c my-service/public/images/books/)
                    </p>
                </div>

                <!-- Image Preview -->
                @if (imagePreview) {
                <div class="form-group full-width">
                    <label>Xem Tr∆∞·ªõc</label>
                    <div class="image-preview">
                        <img [src]="imagePreview" alt="Preview"
                            onerror="this.src='https://via.placeholder.com/200x280?text=No+Image'">
                    </div>
                </div>
                }
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-cancel" (click)="onCancel()">
                    ‚ùå H·ªßy
                </button>
                <button type="submit" class="btn btn-submit">
                    {{ mode === 'create' ? '‚úÖ T·∫°o M·ªõi' : 'üíæ C·∫≠p Nh·∫≠t' }}
                </button>
            </div>
        </form>
    </div>
</div>